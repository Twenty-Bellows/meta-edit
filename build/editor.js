(()=>{"use strict";const e=window.wp.plugins,t=window.wp.editor,n=window.wp.data,l=window.wp.hooks,o=window.ReactJSXRuntime,a=window.wp.components;function i({label:e,name:t}){const n=e.replace(/_/g," ");return(0,o.jsx)("label",{htmlFor:t,style:{display:"block",marginBottom:"10px",textTransform:"uppercase",fontSize:"11px",fontWeight:500,lineHeight:1.4},children:n})}(0,l.addFilter)("meta-edit.field.component","meta-edit.field.component.renderer",((e,{label:t,value:n,onChange:l})=>e||(0,o.jsx)(a.TextControl,{label:t,value:n,onChange:l,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))),(0,l.addFilter)("meta-edit.field.component","meta-edit.field.component.renderer",((e,{label:t,value:n,type:l,slug:i,onChange:r})=>"textarea"!==l?e:(0,o.jsx)(a.TextareaControl,{label:t,value:n,onChange:r,__nextHasNoMarginBottom:!0}))),(0,l.addFilter)("meta-edit.field.component","meta-edit.field.component.renderer",((e,{label:t,value:n,type:l,slug:r,onChange:d})=>"color"!==l?e:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i,{label:t,name:r}),(0,o.jsx)(a.ColorPalette,{clearable:!1,name:r,value:n,onChange:d})]})));const r=window.wp.blockEditor;(0,l.addFilter)("meta-edit.field.component","meta-edit.field.component.renderer",((e,{label:t,value:n,type:l,slug:d,onChange:s})=>"media"!==l?e:(0,o.jsxs)("div",{children:[(0,o.jsx)(i,{label:t,name:d}),(0,o.jsx)(r.MediaUpload,{onSelect:e=>s(e?.url),allowedTypes:["image"],render:({open:e})=>n?(0,o.jsx)("a",{onClick:e,children:(0,o.jsx)("img",{src:n})}):(0,o.jsx)(a.Button,{onClick:e,children:"Open Media Library"})})]}))),(0,l.addFilter)("meta-edit.field.component","meta-edit.field.component.renderer",((e,{label:t,value:l,type:i,slug:r,onChange:d})=>{var s;const p=(0,n.useSelect)((e=>{let t=e("core").getPostTypes()?.map((e=>e.slug));return t?.includes(i)?e("core").getEntityRecords("postType",i,{per_page:-1,order:"asc",orderby:"title",_fields:["id","title"]})||[]:null}),[]);return null===p?e:(0,o.jsx)(a.ComboboxControl,{label:t,value:parseInt(l),onChange:e=>{var t;return d(null!==(t=e?.toString())&&void 0!==t?t:0)},isLoading:0===p.length,placeholder:0===p.length?"Loading...":"Select a "+i,options:null!==(s=p?.map((e=>({label:e.title.raw,value:e.id}))))&&void 0!==s?s:[],__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})})),(0,e.registerPlugin)("meta-edit",{icon:"palmtree",title:"Meta Edit",render:()=>{const{postType:e,fields:a,postId:i,existingMetaFields:r}=(0,n.useSelect)((e=>{const t=e("core/editor").getCurrentPostType(),n=e("core").getPostType(t)?.supports;if(!n||!n["meta-edit"]||!n["meta-edit"][0])return null;const l=n["meta-edit"][0],o=e("core/editor").getCurrentPostId(),a=e("core").getEditedEntityRecord("postType",t,o)?.meta;return{postType:t,fields:l,postId:o,existingMetaFields:a}}),[]);if(!a)return null;const d=e.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()));return(0,o.jsx)(t.PluginDocumentSettingPanel,{name:"meta-edit-panel",title:`${d} Meta`,children:(0,o.jsx)("div",{style:{gap:"16px",display:"flex",flexDirection:"column"},children:Object.entries(a).filter((([e])=>e in r)).map((([t,n])=>{const a=t,d=a.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase())),s=n,p=r[t]||"",c=(0,l.applyFilters)("meta-edit.field.component",null,{label:d,value:p,type:s,slug:a,onChange:n=>{wp.data.dispatch("core/editor").editPost({id:i,type:e,meta:{[t]:n}})}});return(0,o.jsx)("div",{children:c},t)}))})})}})})();